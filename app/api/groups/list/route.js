import { prisma } from "@/lib/db"; import { NextResponse } from "next/server"; export async function GET() { return NextResponse.json(await prisma.group.findMany({include:{students:true}})); } export async function PUT(req) { const {id,isGuide}=await req.json(); if(isGuide){ const g=await prisma.group.findUnique({where:{id}}); if(g) await prisma.group.updateMany({where:{userId:g.userId,id:{not:id}},data:{isGuide:false}}); } return NextResponse.json(await prisma.group.update({where:{id},data:{isGuide}})); }