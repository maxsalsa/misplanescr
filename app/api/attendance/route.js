import { prisma } from "@/lib/db"; import { NextResponse } from "next/server"; export async function POST(req) { const {groupId,date,attendanceData}=await req.json(); const rec=await prisma.attendanceRecord.create({data:{date:new Date(date),groupId}}); await prisma.$transaction(attendanceData.map(i=>prisma.attendance.create({data:{recordId:rec.id,studentId:i.studentId,status:i.status}}))); return NextResponse.json({success:true}); }