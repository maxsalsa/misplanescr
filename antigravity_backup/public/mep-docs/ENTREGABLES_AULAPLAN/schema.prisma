
// GENERADO AUTOM√ÅTICAMENTE POR ANTIGRAVITY V35
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum MepProfile {
  ACADEMICO
  TECNICO
  PRIMARIA
  PREESCOLAR
}

enum FaseMediacion {
  INICIO
  DESARROLLO
  CIERRE
}

model Plan {
  id              String      @id @default(cuid())
  userId          String
  createdAt       DateTime    @default(now())
  
  // METADATOS OFICIALES
  titulo          String
  asignatura      String
  nivel           String
  perfilEducativo MepProfile  @default(ACADEMICO)
  
  // MATRIZ V31 COMPLETA
  marcoCualif     String?     
  valores         String[]    
  ejesTransv      String[]    

  bloques         BloqueCurricular[]

  @@index([asignatura, nivel])
}

model BloqueCurricular {
  id                   String   @id @default(cuid())
  planId               String
  resultadoAprendizaje String   
  saberesEsenciales    String[] 
  indicadoresLogro     String[] 
  evidencias           String[] 

  actividades          ActividadMediacion[]
  plan                 Plan     @relation(fields: [planId], references: [id], onDelete: Cascade)
}

model ActividadMediacion {
  id              String        @id @default(cuid())
  bloqueId        String
  fase            FaseMediacion
  tiempoMinutos   Int           @default(40)

  // SINTAXIS DE HIERRO
  actividadDocente    String    @db.Text 
  actividadEstudiante String    @db.Text
  
  estrategiaDidactica String?   
  recursos            String[]  

  bloque          BloqueCurricular @relation(fields: [bloqueId], references: [id], onDelete: Cascade)
}
    